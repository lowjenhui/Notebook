{{left_sidebar_enabled,right_sidebar_enabled=False,('message' in globals())}}
{{extend 'layout.html'}}

<div id="target"></div>

<script id="template" type="text/ractive">
<div class="title">
  <h1>Note Book</h1>
</div>

<div class="search">
	<div class="input-group">
      <span class="input-group-btn">
        <button class="btn btn-default" type="button">
        	<i class="fa fa-search"></i>
        </button>
      </span>
      <input type="text" class="form-control" placeholder="Search">
    </div>
</div>

<div class="new_note">
    <div class="note-new-default" style="display: inline-block;"> Add Note </div>
  	<div class="note-new-list" style="display: inline-block;">
  		<i class="fa fa-list"></i>
  	</div>
  	<div class="note-new-img" style="display: inline-block;">
  		<i class="fa fa-picture-o"></i>
  	</div>
</div>

<div class="notes_list">
  {% #notes_dict:note_index %}
    <div class="note-item" data-author="" data-noteid="{% note_index %}" style="border: purple 1px solid;">
		<div class="note-favourite"><i class="fa fa-heart"></i></div>
  	<h3 class="note-title">{% note_title %}</h3>
  	<h5 class="note-description">{% note_description %}</h5>
  	<div class="note-list">{% note_list %}</div>
  	<img class="note-img" src="{% note_image_url %}"/>
  	<div class="note-tags"></div>
  	<div class="note-buttons" style="display: none">
      	<i class="fa fa-user-plus"></i>
      	<i class="fa fa-paint-brush"></i>
      	<i class="fa fa-tag"></i>
      	<i class="fa fa-trash"></i>
	  </div>
		<div class="note-authors"></div>
    </div>
  {% /board_dict %}
</div>

<div class="note_view" style="border: red 1px solid;">
    <div class="note-item" data-author="" data-noteid="{% note_index %}">
		<div class="note-favourite" style="text-align: right;">
      <i class="fa fa-heart"></i>
    </div>
    <h3 class="note-title">Really dummy title</h3>
    <h5 class="note-description">Some random description</h5>
		<div class="note-list"></div>
  	<img class="note-img" src=""/>
  	<div class="note-time"></div>
  	<div class="note-tags"></div>
  	<div class="note-buttons">
      <i class="fa fa-user-plus"></i>
      <i class="fa fa-paint-brush"></i>
      <i class="fa fa-tag"></i>
      <i class="fa fa-trash"></i>
		</div>
		<div class="note-authors"></div>
    </div>
</div>

</script>

<script>
$(function() {

  // Ractive object
  var MAIN = new Ractive({
    el: '#target',
    template: '#template',
    delimiters: ['{%', '%}'],
    tripleDelimiters: ['{%%', '%%}'],
    data: {
      sign_in: "{{=URL('default', 'user', args=['login'])}}",
      sign_up: "{{=URL('default', 'user', args=['register'])}}",
      notes_dict: {},
      note_id_new: "{{=note_id_new}}",
      user_id: "{{=user_id}}"
    },
  });

  // Loads the initial list of messages.
  function load_notes() {
    $.ajax("{{=URL('default', 'load_notes')}}",
          {
            method: 'POST',
            success: function (data) {
              MAIN.set('notes_dict', data['notes_dict']);
            }
          }
    );
  }

  load_notes();
 });

 </script>